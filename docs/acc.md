# 验证码

## 发送验证码到指定手机

需要登陆。

``` 
GET /api/user/code/sms
```

参数：

| 参数名    | 必填   | 说明                              | 
| ------ | ---- | ------------------------------- | 
| mobile | Y    | 手机号                             | 
| code   | Y    | 用户在页面上填写的验证码, 只有该验证码正确时才会真正发送短信 | 

> 手机短信中的验证码有效时间为5分钟。



## 发送验证码到当前登陆用户手机

需要登陆。

``` 
POST /api/user/code/sms
```

参数：

| 参数名  | 必填   | 说明    | 
| ---- | ---- | ----- | 
| code | Y    | 图片验证码 | 

## 生成一个6位图片验证码

该接口用于生成一个随机验图片证码，防机器人

需要登陆。

``` 
GET /gen.do
```

参数：

| 参数名  | 必填   | 说明        | 
| ---- | ---- | --------- | 
| mId  | Y    | 当前登陆用户的id | 

# 更新操作

## 开通现金账户(钱包)

该接口需要登陆。

用户在第一次进入钱包时调用该接口。

``` 
POST /api/user/acc
```

参数:

| 参数名     | 必填   | 说明         | 
| ------- | ---- | ---------- | 
| dealPwd | Y    | 交易密码       | 
| phone   | N    | 用户手机号      | 
| code    | Y    | 用户收到的短信验证码 | 
| email   | N    | 用户邮箱       | 
| name    | N    | 用户姓名       | 

`code`参数是用户手机收到的短信验证码，可以调用`发送短信验证码`接口来发送短信。

> 如果用户是通过手机号码注册的，则不需要填写`phone`参数。如果为非手机号注册，则`phone`参数必填。

## 修改支付宝账号

``` 
PUT /api/user/acc/alipay
```

参数：

| 参数名    | 必填   | 说明     | 
| ------ | ---- | ------ | 
| alipay | Y    | 新支付宝账户 | 
| code   | Y    | 手机验证码  | 

## 修改银行卡账号

``` 
PUT/ api/user/acc/bank
```

参数：

| 参数名     | 必填   | 说明    | 
| ------- | ---- | ----- | 
| bankAcc | Y    | 新银行卡号 | 
| code    | Y    | 手机验证码 | 



## 发起提现申请

商家、学生都可以申请提现。

``` 
POST /api/user/acc/withdraw
```

参数：

| 参数名       | 必填   | 说明    | 
| --------- | ---- | ----- | 
| amt       | Y    | 提现金额  | 
| alipayAcc | N    | 支付宝账户 | 
| bankAcc   | N    | 银行卡号  | 
| dealPwd   | Y    | 交易密码  | 

`alipayAcc`和`bankAcc`至少填写一项。



## 发起充值申请

商家、学生都可以发起充值申请，待管理员审核完成后账户金额自动增加。

``` 
POST /api/user/acc/charge
```

参数:

| 参数名      | 必填   | 说明     | 
| -------- | ---- | ------ | 
| amt      | Y    | 充值金额   | 
| tradeNum | Y    | 支付宝交易号 | 

## 解绑手机号

``` 
DELETE /api/user/acc/phone
```

参数：

| 参数名  | 必填   | 说明            | 
| ---- | ---- | ------------- | 
| code | Y    | 发送到用户老手机上的验证码 | 

## 绑定新手机号

``` 
PUT /api/user/acc/phone
```

参数：

| 参数名   | 必填   | 说明            | 
| ----- | ---- | ------------- | 
| code  | Y    | 发送到用户新手机上的验证码 | 
| phone | Y    | 新手机号          | 

> 注意：只有当用户先解绑手机后才能成功调用该接口。



## 商家身份认证申请

只有商家用户在登陆状态时才可以调用该接口。

``` 
POST /api/user/certi/emp
```

参数：

| 参数名      | 必填   | 说明   | 
| -------- | ---- | ---- | 
| compName | Y    | 公司全名 | 
| addr     | Y    | 公司地址 | 
| picIds   | Y    | 照片上传 | 

`picIds`参数为以`;`分隔的图片在又拍云的路径, 如:

``` 
/a.jpg;/b.jpg
```





## 学生身份认证申请

只有学生用户在登陆状态时才可以调用该接口。

``` 
POST /api/user/certi/emp
```

参数：

| 参数名       | 必填   | 说明      | 
| --------- | ---- | ------- | 
| name      | Y    | 真实姓名    | 
| collegeId | Y    | 所在大学的id | 
| schoolId  | Y    | 学在学院的id | 
| picIds    | Y    | 上传的认证图片 | 

`picIds`参数为以`;`分隔的图片在又拍云的路径, 如:

``` 
/a.jpg;/b.jpg
```



# 查询操作

## 查询当前用户的现金账户

需要登陆。

``` 
GET /api/user/acc
```

该接口不需要参数。



## 查询账户资金变化记录

需要登陆。

``` 
GET /api/user/acc/flow
```

参数：

| 参数名   | 必填   | 说明                | 
| ----- | ---- | ----------------- | 
| start | N    | 开始日期。 如，2015-9-14 | 
| end   | N    | 结束日期。如，2015-9-20  | 
| pn    | N    |                   | 
| ps    | N    |                   | 