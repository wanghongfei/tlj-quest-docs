<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>任务系统 - Taolijie轻兼职接口文档</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "任务系统";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Taolijie轻兼职接口文档</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">概述</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../register/">登陆注册</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">任务系统</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#_1">分类</a></li>
                
                    <li><a class="toctree-l4" href="#b1">B1 查询分类列表</a></li>
                
                    <li><a class="toctree-l4" href="#b2-id">B2 通过id查询分类</a></li>
                
                    <li><a class="toctree-l4" href="#b3">B3 通过分类名查询分类信息</a></li>
                
            
                <li class="toctree-l3"><a href="#_2">任务</a></li>
                
                    <li><a class="toctree-l4" href="#b4">B4 商家发布任务</a></li>
                
                    <li><a class="toctree-l4" href="#b41">B4.1 商家发布答题、问卷任务</a></li>
                
                    <li><a class="toctree-l4" href="#b42">B4.2 计算任务发布费用</a></li>
                
                    <li><a class="toctree-l4" href="#b43">B4.3 刷新任务</a></li>
                
                    <li><a class="toctree-l4" href="#b44">B4.4 商家审核任务</a></li>
                
                    <li><a class="toctree-l4" href="#b45">B4.5 发布线下任务</a></li>
                
                    <li><a class="toctree-l4" href="#b46">B4.6 上(下)架线下任务</a></li>
                
                    <li><a class="toctree-l4" href="#b47">B4.7 刷新线下任务</a></li>
                
                    <li><a class="toctree-l4" href="#b5">B5 任务领取</a></li>
                
                    <li><a class="toctree-l4" href="#b6">B6 提交任务完成申请</a></li>
                
                    <li><a class="toctree-l4" href="#b61">B6.1 提交问卷答案</a></li>
                
            
                <li class="toctree-l3"><a href="#_3">任务查询</a></li>
                
                    <li><a class="toctree-l4" href="#b7">B7 查询任务发布记录</a></li>
                
                    <li><a class="toctree-l4" href="#b71">B7.1 查询指定任务的答题记录</a></li>
                
                    <li><a class="toctree-l4" href="#b72">B7.2 查询问卷中所有题目</a></li>
                
                    <li><a class="toctree-l4" href="#b73">B7.3 查询答题统计数据</a></li>
                
                    <li><a class="toctree-l4" href="#b74">B7.4 查询当前用户发布的线下任务</a></li>
                
                    <li><a class="toctree-l4" href="#b8">B8 查询任务领取记录</a></li>
                
                    <li><a class="toctree-l4" href="#b9">B9 查询任务提交记录</a></li>
                
                    <li><a class="toctree-l4" href="#b91">B9.1 查询已领取的卡券</a></li>
                
                    <li><a class="toctree-l4" href="#b92">B9.2 商家验证卡券</a></li>
                
                    <li><a class="toctree-l4" href="#b93">B9.3 商家查询已经创建的卡券信息</a></li>
                
                    <li><a class="toctree-l4" href="#94-id">9.4 根据id查询卡券</a></li>
                
                    <li><a class="toctree-l4" href="#b10">B10 查询指定任务的提交记录</a></li>
                
                    <li><a class="toctree-l4" href="#b11">B11 条件查询</a></li>
                
                    <li><a class="toctree-l4" href="#b12-id">B12 根据id查询任务</a></li>
                
                    <li><a class="toctree-l4" href="#b121">B12.1 查询附近的线下任务</a></li>
                
                    <li><a class="toctree-l4" href="#b122">B12.2 根据区域查询线下任务</a></li>
                
                    <li><a class="toctree-l4" href="#b123-id">B12.3 根据id查询线下任务</a></li>
                
            
                <li class="toctree-l3"><a href="#taolijie">Taolijie代审核</a></li>
                
                    <li><a class="toctree-l4" href="#b13">B13 计算桃李街代审核费用</a></li>
                
                    <li><a class="toctree-l4" href="#b14-taolijie">B14 申请Taolijie代审核任务</a></li>
                
                    <li><a class="toctree-l4" href="#b15">B15 查询代审核明细</a></li>
                
            
                <li class="toctree-l3"><a href="#_4">收藏</a></li>
                
                    <li><a class="toctree-l4" href="#b16">B16 收藏任务</a></li>
                
                    <li><a class="toctree-l4" href="#b17">B17 取消收藏任务</a></li>
                
                    <li><a class="toctree-l4" href="#b18">B18 查询收藏列表</a></li>
                
                    <li><a class="toctree-l4" href="#b19">B19 查询任务是否已经收藏</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../acc/">账户系统</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../admin/">后台接口</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../sign/">签名生成</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../job/">兼职</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../sh/">二手</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../reco/">推荐</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../dict/">字典</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Taolijie轻兼职接口文档</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>任务系统</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="_1">分类</h1>
<p>任务分类是任务的类型，每一个任务都有且仅属于一个分类。</p>
<h2 id="b1">B1 查询分类列表</h2>
<pre><code class="html">GET /api/quest/cate/list
</code></pre>

<p>参数:</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>是否必填</th>
<th>说明</th>
<th>demo</th>
</tr>
</thead>
<tbody>
<tr>
<td>pn</td>
<td>N</td>
<td>pageNumber, 查询第pn页的记录, 默认为0</td>
<td></td>
</tr>
<tr>
<td>ps</td>
<td>N</td>
<td>pageSize, 每页显示ps条记录, 默认为8</td>
<td></td>
</tr>
</tbody>
</table>
<p>返回报文data字段格式：</p>
<p>data字段是一个名为”list”的JSON数组，数组中的每一个元素即代表一个分类对象。</p>
<p>下面是一个返回报文data字段示例：</p>
<pre><code class="json">&quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;id&quot;: 1,
        &quot;name&quot;: &quot;cate1&quot;,
        &quot;memo&quot;: null,
        &quot;themeColor&quot;: null,
        &quot;level&quot;: 1
      },
      {
        &quot;id&quot;: 2,
        &quot;name&quot;: &quot;cate2&quot;,
        &quot;memo&quot;: null,
        &quot;themeColor&quot;: null,
        &quot;level&quot;: null
      }
    ],
    &quot;resultCount&quot;: 2
  }
</code></pre>

<table>
<thead>
<tr>
<th>参数名</th>
<th>说明</th>
<th>demo</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>分类的唯一标识，整数</td>
<td>1</td>
</tr>
<tr>
<td>name</td>
<td>分类名</td>
<td>朋友圈推广</td>
</tr>
<tr>
<td>memo</td>
<td>备注</td>
<td></td>
</tr>
<tr>
<td>level</td>
<td>分类层级，暂时无用</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="b2-id">B2 通过id查询分类</h2>
<pre><code>GET /api/quest/cate/{id}
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>Y</td>
<td>分类的id号</td>
</tr>
</tbody>
</table>
<p>返回报文data字段：</p>
<p>data字段中直接是分类JSON对象, 若不存在则为<code>data: null</code></p>
<pre><code class="json">&quot;data&quot;: {
        &quot;id&quot;: 1,
        &quot;name&quot;: &quot;cate1&quot;,
        &quot;memo&quot;: null,
        &quot;themeColor&quot;: null,
        &quot;level&quot;: 1
  }
</code></pre>

<h2 id="b3">B3 通过分类名查询分类信息</h2>
<pre><code>GET /api/quest/cate/name/{name}
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>Y</td>
<td>分类名</td>
</tr>
</tbody>
</table>
<p>返回报文data字段：</p>
<p>data字段中直接是分类JSON对象, 若不存在则为<code>data: null</code></p>
<pre><code class="json">&quot;data&quot;: {
        &quot;id&quot;: 1,
        &quot;name&quot;: &quot;cate1&quot;,
        &quot;memo&quot;: null,
        &quot;themeColor&quot;: null,
        &quot;level&quot;: 1
  }
</code></pre>

<h1 id="_2">任务</h1>
<p>任务的发布、修改、审核和领取相关接口</p>
<h2 id="b4">B4 商家发布任务</h2>
<pre><code>POST /api/user/quest
</code></pre>

<blockquote>
<p>只有以商家用户登陆才能成功调用。</p>
</blockquote>
<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>title</td>
<td>Y</td>
<td>任务标题</td>
</tr>
<tr>
<td>questCateId</td>
<td>Y</td>
<td>任务分类的id</td>
</tr>
<tr>
<td>startTime</td>
<td>Y</td>
<td>任务开始时间</td>
</tr>
<tr>
<td>endTime</td>
<td>Y</td>
<td>任务结束时间</td>
</tr>
<tr>
<td>totalAmt</td>
<td>Y</td>
<td>任务总数量</td>
</tr>
<tr>
<td>award</td>
<td>Y</td>
<td>单个任务的赏金</td>
</tr>
<tr>
<td>contactName</td>
<td>Y</td>
<td>联系人姓名</td>
</tr>
<tr>
<td>contactPhone</td>
<td>Y</td>
<td>联系人手机号</td>
</tr>
<tr>
<td>description</td>
<td>Y</td>
<td>任务简述(100字以内)</td>
</tr>
<tr>
<td>questDetail</td>
<td>Y</td>
<td>任务详细描述(1000字以内)</td>
</tr>
<tr>
<td>url</td>
<td>N</td>
<td>任务链接</td>
</tr>
<tr>
<td>memo</td>
<td>N</td>
<td>任务备注</td>
</tr>
<tr>
<td>orderId</td>
<td>N</td>
<td>订单号。<strong>如果填写此参数则不从钱包中扣钱, 而是验证对应的订单是否正确</strong></td>
</tr>
<tr>
<td>collegeIds</td>
<td>(Y)</td>
<td>任务对象，仅当<code>all</code>数为<code>0</code>需要填写：大学. 以<code>;</code>隔的id字符串，如<code>1;2;3</code></td>
</tr>
<tr>
<td>cityIds</td>
<td>(Y)</td>
<td>任务对象,仅当<code>all</code>数为<code>0</code>需要填写：城市. 同上</td>
</tr>
<tr>
<td>proIds</td>
<td>(Y)</td>
<td>任务对象,仅当<code>all</code>数为<code>0</code>需要填写：省. 同上</td>
</tr>
<tr>
<td>couponTitle</td>
<td>(N)</td>
<td>卡券名</td>
</tr>
<tr>
<td>couponDesp</td>
<td>(N)</td>
<td>卡券使用规则</td>
</tr>
<tr>
<td>expiredTime</td>
<td>(N)</td>
<td>卡券过期时间, yyyy-mm-dd</td>
</tr>
<tr>
<td>logo</td>
<td>N</td>
<td>卡券店铺logo在又拍的路径</td>
</tr>
<tr>
<td>couponAmt</td>
<td>(N)</td>
<td>卡券数量</td>
</tr>
<tr>
<td>save</td>
<td>N</td>
<td><code>0</code> 直接发布. <code>1</code> 保存但不发布(一样扣钱). 默认为<code>0</code></td>
</tr>
<tr>
<td>all</td>
<td>N</td>
<td>任务对象是否为所有人. <code>0</code> 默认值,不是所有人, <code>1</code> 所有人</td>
</tr>
</tbody>
</table>
<p>接口调用后，服务器会自动计算总任务赏金，并从发布者的现金账户中扣除可用余额。</p>
<blockquote>
<p>扣除的金额 = [ (1 + 费率) * 单个任务赏金 ] * 任务数量</p>
</blockquote>
<p>从<code>couponTitle</code>到<code>couponAmt</code>为卡券信息，<strong>如果需要发布卡券则这些参数全部必填(logo可以不填)</strong>，如果不需要卡券则不需要填写。</p>
<p><strong>带有<code>(N)</code>的参数要么全不填，要么全填。</strong></p>
<h2 id="b41">B4.1 商家发布答题、问卷任务</h2>
<pre><code>POST /api/user/quest/question
</code></pre>

<p>参数：</p>
<p>该接口只接受<code>JSON</code>字符串参数，在<code>javascript</code>中需要将<code>JSON</code>对象转换为<code>JSON</code>字符串，然后添加<code>Content-Type: application/json; charset=utf-8</code>请求头。</p>
<p>格式如下(做为请求参数时去掉注释)：</p>
<pre><code class="json">{
    // questions是json数组
    // 数组中每个对象代表一个问题
    &quot;questions&quot;: [
        { // question-1 starts
            &quot;opts&quot;: [{                      // opts: 该问题对应的选择项
                &quot;optName&quot;: &quot;a&quot;,             // 选项名
                &quot;optContent&quot;: &quot;optContent&quot;, // 选项内容
                &quot;orderIndex&quot;: 0,            // 选项排序值，越小越靠前
                &quot;correct&quot;: true             // 该选项是否是正确答案. 如果是问卷类问题，忽略该属性
            },
            {
                &quot;optName&quot;: &quot;b&quot;,
                &quot;optContent&quot;: &quot;optContent&quot;,
                &quot;orderIndex&quot;: 1,
                &quot;correct&quot;: true
            }],
            &quot;content&quot;: &quot;content&quot;,   // 问题的内容
            &quot;orderIndex&quot;: 0,        // 问题的排序值，越小越靠前
            &quot;type&quot;: 0               // 问题的类型。 0: 答题 1:问卷
        },// question-1 ends
        { // question-2 starts
            &quot;opts&quot;: [{
                &quot;optName&quot;: &quot;a&quot;,
                &quot;optContent&quot;: &quot;optContent&quot;,
                &quot;orderIndex&quot;: 0,
                &quot;correct&quot;: true
            },
            {
                &quot;optName&quot;: &quot;b&quot;,
                &quot;optContent&quot;: &quot;optContent&quot;,
                &quot;orderIndex&quot;: 1,
                &quot;correct&quot;: true
            }],
            &quot;content&quot;: &quot;content&quot;,
            &quot;orderIndex&quot;: 1,
            &quot;type&quot;: 0
        } // question-2 ends

    ],

    // 任务信息
    &quot;quest&quot;: {
        &quot;title&quot;: &quot;testTTTTT&quot;,
        &quot;questCateId&quot;: 1,
        &quot;startTime&quot;: &quot;2015-11-11 10:10:10&quot;,
        &quot;endTime&quot;: &quot;2016-11-11 10:10:10&quot;,
        &quot;totalAmt&quot;: 5, // 任务总数量
        &quot;award&quot;: 10, // 答对所有问题时给学生的赏金
        &quot;contactName&quot;: &quot;whf&quot;,
        &quot;contactPhone&quot;: &quot;111111&quot;,
        &quot;description&quot;: &quot;description&quot;,
        &quot;questDetail&quot;: &quot;detail&quot;,
        &quot;provinceId&quot;: 1,
        &quot;cityId&quot;:1,
        &quot;regionId&quot;:1

    },
    &quot;orderId&quot;: 10,  // 订单号, 可选参数. 如果不填写会从钱包中扣钱，填写会检查对应的订单信息(不从钱包扣钱) 

    // 任务对象
    &quot;collegeIds&quot;: &quot;1;2;3&quot;,
    &quot;schoolIds&quot;: &quot;1;2;3&quot;,
    &quot;cityIds&quot;: &quot;1;2&quot;,
    &quot;proIds&quot;: &quot;1;2&quot;,

    &quot;save&quot;: 0 或 1 // 可选参数. 0: 直接发布. 1: 保存但不发布(一样扣钱). 默认为0
}
</code></pre>

<blockquote>
<p>服务器会自动计算答对每个问题的赏金。如, <code>award = 10</code>且一共有4个问题时，学生每答对一题的赏金为<code>award / 4 = 2.50</code></p>
</blockquote>
<h2 id="b42">B4.2 计算任务发布费用</h2>
<p>需要登陆。</p>
<pre><code>GET /api/user/quest/fee
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>award</td>
<td>Y</td>
<td>单个任务赏金</td>
</tr>
<tr>
<td>amt</td>
<td>Y</td>
<td>任务总数量</td>
</tr>
</tbody>
</table>
<p>对于请求</p>
<pre><code>GET /api/user/quest/fee?award=10&amp;amt=10
</code></pre>

<p>返回报文为：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: 110, // 110元
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b43">B4.3 刷新任务</h2>
<p>刷新任务可以使任务排名更靠前。</p>
<p>需要登陆。</p>
<pre><code>PUT /api/user/quest/flush/{id}
</code></pre>

<blockquote>
<p><code>id</code>为要刷新的任务id</p>
</blockquote>
<h2 id="b44">B4.4 商家审核任务</h2>
<p>只有商家用户可调用。</p>
<pre><code>PUT /api/user/quest/submit/{reqId}
</code></pre>

<blockquote>
<p><code>reqId</code>: 任务提交申请的id号</p>
</blockquote>
<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>status</td>
<td>Y</td>
<td>审核结果</td>
</tr>
<tr>
<td>memo</td>
<td>N</td>
<td>备注</td>
</tr>
</tbody>
</table>
<p>其中，status参数取值如下：</p>
<table>
<thead>
<tr>
<th>取值</th>
<th>含意</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>等待审核</td>
</tr>
<tr>
<td>02</td>
<td>商家审核不通过</td>
</tr>
<tr>
<td>05</td>
<td>商家通过</td>
</tr>
</tbody>
</table>
<blockquote>
<p>如果审核不通过，应当传入memo参数说明审核失败的原因。</p>
</blockquote>
<h2 id="b45">B4.5 发布线下任务</h2>
<p>需要先完成个人身份认证。</p>
<p>单个用户接口调用最小间隔为<code>10s</code></p>
<pre><code>POST /api/user/offquest
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>title</td>
<td>Y</td>
<td>任务标题(45字内)</td>
</tr>
<tr>
<td>cate</td>
<td>Y</td>
<td>任务分类id</td>
</tr>
<tr>
<td>award</td>
<td>Y</td>
<td>任务赏金( &gt; 0 )</td>
</tr>
<tr>
<td>wt</td>
<td>Y</td>
<td>任务执行的时间(2020-12-12 10:10:10)，必须填写未来的时间</td>
</tr>
<tr>
<td>wp</td>
<td>Y</td>
<td>任务执行的地点</td>
</tr>
<tr>
<td>desp</td>
<td>Y</td>
<td>任务要求，描述，说明</td>
</tr>
<tr>
<td>proid</td>
<td>Y</td>
<td>任务所在省</td>
</tr>
<tr>
<td>cid</td>
<td>Y</td>
<td>任务所在市</td>
</tr>
<tr>
<td>rid</td>
<td>Y</td>
<td>任务所在区</td>
</tr>
<tr>
<td>la</td>
<td>Y</td>
<td>纬度. 如: <code>37.20</code></td>
</tr>
<tr>
<td>lo</td>
<td>Y</td>
<td>经度. 如: <code>122.18</code></td>
</tr>
</tbody>
</table>
<h2 id="b46">B4.6 上(下)架线下任务</h2>
<p>需要登陆。</p>
<pre><code>PUT api/user/offquest/offline
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>q</td>
<td>Y</td>
<td>任务id</td>
</tr>
<tr>
<td>off</td>
<td>N</td>
<td>是否下线. <code>1</code> 下线(默认值 ), <code>0</code> 上线</td>
</tr>
</tbody>
</table>
<h2 id="b47">B4.7 刷新线下任务</h2>
<p>需要登陆。</p>
<pre><code>PUT /api/user/offquest/f
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>q</td>
<td>Y</td>
<td>任务id</td>
</tr>
</tbody>
</table>
<h2 id="b5">B5 任务领取</h2>
<p>只有登陆状态下的学生用户才可以领取任务。</p>
<pre><code>POST /api/user/quest/assign/{questId}
</code></pre>

<blockquote>
<p>questId: 要领取的任务的id</p>
</blockquote>
<h2 id="b6">B6 提交任务完成申请</h2>
<p>学生用户完成任务以后，在线提交申请，等待管理员审核。</p>
<blockquote>
<p>只有已登陆的学生用户才能发起该请求。</p>
</blockquote>
<pre><code>POST /api/user/quest/submit/{questId}
</code></pre>

<blockquote>
<p>questId: 已完成的任务的id</p>
</blockquote>
<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Y</td>
<td>说明文字</td>
</tr>
<tr>
<td>imageIds</td>
<td>Y</td>
<td>图片说明。以;分隔的图片id。 如：1;2;3</td>
</tr>
<tr>
<td>name</td>
<td>N</td>
<td>申请人姓名</td>
</tr>
<tr>
<td>memo</td>
<td>N</td>
<td>备注</td>
</tr>
</tbody>
</table>
<h2 id="b61">B6.1 提交问卷答案</h2>
<p>调用场景：用户选择完一个问题的选项点击提交时调用。</p>
<p>需要用户登陆且领取对应任务。</p>
<pre><code>GET /api/user/quest/question/check
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>questionId</td>
<td>Y</td>
<td>被答问题的id</td>
</tr>
<tr>
<td>optIds</td>
<td>Y</td>
<td>用户选择的选项id, 以<code>;</code>隔。如，<code>1;2;3</code></td>
</tr>
</tbody>
</table>
<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: false, // false表示答案错误, true表示回答正确
  &quot;ok&quot;: true
}
</code></pre>

<h1 id="_3">任务查询</h1>
<h2 id="b7">B7 查询任务发布记录</h2>
<p>需要商家用户登陆。</p>
<pre><code>GET /api/user/quest/publish/list
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>pn</td>
<td>N</td>
<td>显示第几页. default = 0</td>
</tr>
<tr>
<td>ps</td>
<td>N</td>
<td>一页多少条记录. default = 8</td>
</tr>
</tbody>
</table>
<p>返回示例：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;id&quot;: 1,
        &quot;title&quot;: &quot;quest1&quot;,
        &quot;createdTime&quot;: &quot;2015-09-24 09:17:30&quot;, // 创建时间
        &quot;questCateId&quot;: 1,   // 任务分类id
        &quot;startTime&quot;: &quot;2015-10-09 16:00:00&quot;, // 任务开始时间
        &quot;endTime&quot;: &quot;2015-12-31 16:00:00&quot;, // 任务结束时间 
        &quot;limitTime&quot;: 2, // 任务领取后完成限制时间
        &quot;totalAmt&quot;: 10, // 任务总数量
        &quot;leftAmt&quot;: 9, // 任务剩余数量
        &quot;award&quot;: 1, // 单个任务赏金
        &quot;memberId&quot;: 1, // 任务发布者id
        &quot;finalAward&quot;: 1, // 计算费率后的单个任务赏金
        &quot;contactName&quot;: &quot;whf&quot;, // 联系人姓名
        &quot;contactPhone&quot;: &quot;11111111111&quot;,
        &quot;description&quot;: &quot;task&quot;, // 任务简述
        &quot;questDetail&quot;: &quot;task&quot;, // 任务详细
        &quot;url&quot;: null, // 任务链接地址
        &quot;memo&quot;: null,
        &quot;offline&quot;: false, // 是否已经下线
        &quot;provinceId&quot;: 1, // 任务对象：省id
        &quot;cityId&quot;: 1, // 任务对象：城市id
        &quot;regionId&quot;: 1, // 任务对象：区域id
        &quot;collegeId&quot;: null,
        &quot;schoolId&quot;: null
      }
    ],
    &quot;resultCount&quot;: 1
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b71">B7.1 查询指定任务的答题记录</h2>
<p>需要登陆，用于判断一个问卷中有哪些题目已答，哪些未答。</p>
<pre><code>GET /api/user/quest/question/record
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>questId</td>
<td>Y</td>
<td>任务id, 必须是答题或问卷任务</td>
</tr>
</tbody>
</table>
<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;id&quot;: 1,
        &quot;createdTime&quot;: &quot;2015-10-22 13:58:16&quot;, // 答题时间
        &quot;questionId&quot;: 9, // 问题id
        &quot;memberId&quot;: 2, // 答题者用户id
        &quot;questId&quot;: 14 // 题目对应的任务id
      },
      {
        &quot;id&quot;: 2,
        &quot;createdTime&quot;: &quot;2015-10-23 08:22:25&quot;,
        &quot;questionId&quot;: 10,
        &quot;memberId&quot;: 2,
        &quot;questId&quot;: 14
      }
    ],
    &quot;resultCount&quot;: 2
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b72">B7.2 查询问卷中所有题目</h2>
<p>需要登陆且已经领取该任务。</p>
<pre><code>GET /api/user/quest/question
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>questId</td>
<td>Y</td>
<td>任务</td>
</tr>
</tbody>
</table>
<p>对于请求</p>
<pre><code>GET /api/user/quest/question?questId=14
</code></pre>

<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [ // list数组中每一个对象表示一道题目
      {
        &quot;id&quot;: 9, // 题目的id号
        &quot;createdTime&quot;: &quot;2015-10-22 10:26:03&quot;, // 题目创建时间
        &quot;content&quot;: &quot;content&quot;, // 题目内容
        &quot;questId&quot;: 14, // 当前任务id
        &quot;orderIndex&quot;: 1, //排序值 ，越小越靠前
        &quot;type&quot;: 1, // 题目类型。 0: 答题 1:问卷
        &quot;userAmt&quot;: 5, // 答过此题的人数
        &quot;correctAmt&quot;: 0, // 答对此题的人数
        &quot;opts&quot;: [ // 题目对应的选项
          {
            &quot;id&quot;: 9, // 选项id
            &quot;optName&quot;: &quot;a&quot;, // 选项名
            &quot;optContent&quot;: &quot;optContent&quot;, // 选项内容 
            &quot;questionId&quot;: 9, // 选项对应的问题id
            &quot;answerAmt&quot;: 2, // 选择过此选项的用户人数
            &quot;orderIndex&quot;: 0 // 排序值 ，越小越靠前
          },
          {
            &quot;id&quot;: 10,
            &quot;optName&quot;: &quot;b&quot;,
            &quot;optContent&quot;: &quot;optContent&quot;,
            &quot;questionId&quot;: 9,
            &quot;answerAmt&quot;: 0,
            &quot;orderIndex&quot;: 1
          }
        ]
      },
      {
        &quot;id&quot;: 10,
        &quot;createdTime&quot;: &quot;2015-10-22 10:26:03&quot;,
        &quot;content&quot;: &quot;content&quot;,
        &quot;questId&quot;: 14,
        &quot;orderIndex&quot;: 1,
        &quot;type&quot;: 0,
        &quot;userAmt&quot;: 8,
        &quot;correctAmt&quot;: 2,
        &quot;opts&quot;: [
          {
            &quot;id&quot;: 11,
            &quot;optName&quot;: &quot;a&quot;,
            &quot;optContent&quot;: &quot;optContent&quot;,
            &quot;questionId&quot;: 10,
            &quot;answerAmt&quot;: 7,
            &quot;orderIndex&quot;: 1
          },
          {
            &quot;id&quot;: 12,
            &quot;optName&quot;: &quot;b&quot;,
            &quot;optContent&quot;: &quot;optContent&quot;,
            &quot;questionId&quot;: 10,
            &quot;answerAmt&quot;: 4,
            &quot;orderIndex&quot;: 1
          }
        ]
      }
    ],
    &quot;resultCount&quot;: 2
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b73">B7.3 查询答题统计数据</h2>
<p>需要登陆，只有题目的发布者才能调用。</p>
<pre><code>GET /api/user/quest/question/result
</code></pre>

<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>questId</td>
<td>Y</td>
<td>任务</td>
</tr>
</tbody>
</table>
<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;questionId&quot;: 9, // 问题id
        &quot;totUser&quot;: 5, // 参与答该题的总人数
        &quot;correctUser&quot;: 0, // 答对的人数
        &quot;percentage&quot;: 0, // 正确率
        &quot;opts&quot;: { // 问题选项统计数据
          &quot;9&quot;: &quot;2&quot;, // 选择id = 9选项的人数
          &quot;10&quot;: &quot;0&quot; // 选择id = 10选项的人数
        }
      },
      {
        &quot;questionId&quot;: 10,
        &quot;totUser&quot;: 8,
        &quot;correctUser&quot;: 2,
        &quot;percentage&quot;: 0.25, // 正确率
        &quot;opts&quot;: {
          &quot;11&quot;: &quot;7&quot;,
          &quot;12&quot;: &quot;4&quot;
        }
      }
    ],
    &quot;resultCount&quot;: 2
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b74">B7.4 查询当前用户发布的线下任务</h2>
<p>需要登陆。</p>
<pre><code>GET /api/user/offquest/list
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>pn</td>
<td>N</td>
<td></td>
</tr>
<tr>
<td>ps</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>对于请求</p>
<pre><code>GET /api/user/offquest/list?ps=1
</code></pre>

<p>返回报文为：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;id&quot;: 13,
        &quot;memId&quot;: 2,
        &quot;username&quot;: &quot;wanghongfei&quot;, // 发布者用户名
        &quot;title&quot;: &quot;title&quot;, // 线下任务标题
        &quot;cateId&quot;: 1, // 任务分类id
        &quot;cateName&quot;: &quot;off_cate&quot;, // 任务分类名称
        &quot;award&quot;: 10.5, // 赏金
        &quot;createdTime&quot;: &quot;2015-12-01 14:24:58&quot;, // 发布时间
        &quot;workTime&quot;: &quot;2020-02-02 02:10:20&quot;, // 任务执行时间
        &quot;workPlace&quot;: &quot;work place&quot;, // 工作地点
        &quot;description&quot;: &quot;description&quot;, // 工作详情
        &quot;contactPhone&quot;: &quot;18518369058&quot;, // 联系电话
        &quot;status&quot;: &quot;00&quot;,
        &quot;provinceId&quot;: 1, // 工作所在省id
        &quot;cityId&quot;: 1, // 工作所在城市id
        &quot;regionId&quot;: 1 // 工作所在区域id
      }
    ],
    &quot;resultCount&quot;: 9
  },
  &quot;ok&quot;: true
}
</code></pre>

<p><code>status</code>取值如下：</p>
<table>
<thead>
<tr>
<th>取值</th>
<th>含意</th>
</tr>
</thead>
<tbody>
<tr>
<td>00</td>
<td>已发布</td>
</tr>
<tr>
<td>02</td>
<td>已下线</td>
</tr>
</tbody>
</table>
<h2 id="b8">B8 查询任务领取记录</h2>
<p>需要学生用户登陆。</p>
<pre><code>GET /api/user/quest/assign/list
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>status</td>
<td>N</td>
<td>根据任务状态过虑，不填写表示查询所有</td>
</tr>
<tr>
<td>pn</td>
<td>N</td>
<td></td>
</tr>
<tr>
<td>ps</td>
<td>N</td>
<td></td>
</tr>
</tbody>
</table>
<p>返回示例：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;id&quot;: 1,
        &quot;memberId&quot;: 1, // 领取者id
        &quot;username&quot;: &quot;hanxinxin&quot;, // 领取者用户名
        &quot;questId&quot;: 1, // 领取的任务id
        &quot;questTitle&quot;: &quot;quest1&quot;, // 领取的任务标题
        &quot;assignTime&quot;: &quot;2015-10-09 16:00:00&quot;, // 领取日期
        &quot;status&quot;: &quot;00&quot; // 领取状态
      }
    ],
    &quot;resultCount&quot;: 1
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b9">B9 查询任务提交记录</h2>
<p>需要学生用户登陆状态。</p>
<pre><code>GET /api/user/quest/submit/list
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>pn</td>
<td>N</td>
<td></td>
</tr>
<tr>
<td>ps</td>
<td>N</td>
<td></td>
</tr>
</tbody>
</table>
<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;id&quot;: 7,
        &quot;questId&quot;: 1,
        &quot;memberId&quot;: 2, // 提交者id
        &quot;username&quot;: &quot;taolijie&quot;, // 提交者用户名
        &quot;createdTime&quot;: &quot;2015-10-01 07:21:50&quot;, // 提交时间
        &quot;auditTime&quot;: &quot;2015-10-01 07:22:00&quot;, // 审核时间
        &quot;description&quot;: &quot;I'm done&quot;, // 提交理由
        &quot;imageIds&quot;: &quot;1;2;3;4;5&quot;,
        &quot;status&quot;: &quot;03&quot;,
        &quot;memo&quot;: &quot;&quot;,
        &quot;name&quot;: null // 提交者姓名
      }
    ],
    &quot;resultCount&quot;: 1
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b91">B9.1 查询已领取的卡券</h2>
<p>只有学生才能调用。</p>
<pre><code>GET /api/user/quest/coupon/list
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>status</td>
<td>N</td>
<td>是否根据卡券状态过虑</td>
</tr>
<tr>
<td>pn</td>
<td>N</td>
<td></td>
</tr>
<tr>
<td>ps</td>
<td>N</td>
<td></td>
</tr>
</tbody>
</table>
<p><code>status</code>取值如下：</p>
<table>
<thead>
<tr>
<th>取值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>未被领取(学生调用该接口不会出现此状态)</td>
</tr>
<tr>
<td>1</td>
<td>已被领取</td>
</tr>
<tr>
<td>2</td>
<td>已使用</td>
</tr>
</tbody>
</table>
<p>反回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;id&quot;: 1,
        &quot;code&quot;: &quot;PdcWjcnYiPELfvnTWvkKJmCScNAYbU&quot;, // 卡券编号
        &quot;createdTime&quot;: &quot;2015-10-27 03:07:40&quot;, // 商家创建卡券的日期
        &quot;acquireTime&quot;: &quot;2015-10-27 07:57:26&quot;, // 领取日期
        &quot;empId&quot;: 1, // 发卡商家用户id
        &quot;memId&quot;: 2, // 领取者用户id
        &quot;questTitle&quot;: &quot;title&quot;, // 卡标题
        &quot;questId&quot;: 27, // 卡对应的任务
        &quot;compName&quot;: null, // 商家店铺名
        &quot;title&quot;: &quot;coupon&quot;, // 卡券标题
        &quot;description&quot;: &quot;desp&quot;, // 卡券使用说明
        &quot;expiredTime&quot;: &quot;2019-12-31 16:00:00&quot;, // 过期时间
        &quot;logoPath&quot;: &quot;logo.jpg&quot;, // logo图片的URL地址(可以为空)
        &quot;status&quot;: 1 // 卡券状态值 
      },
      {
        &quot;id&quot;: 2,
        &quot;code&quot;: &quot;mghBLXpEATOrQrlglIOwwfobypEajZ&quot;,
        &quot;createdTime&quot;: &quot;2015-10-27 03:07:40&quot;,
        &quot;acquireTime&quot;: &quot;2015-10-27 07:57:26&quot;,
        &quot;empId&quot;: 1,
        &quot;memId&quot;: 2,
        &quot;questTitle&quot;: &quot;title&quot;,
        &quot;questId&quot;: 27,
        &quot;compName&quot;: null,
        &quot;title&quot;: &quot;coupon&quot;,
        &quot;description&quot;: &quot;desp&quot;,
        &quot;expiredTime&quot;: &quot;2019-12-31 16:00:00&quot;,
        &quot;logoPath&quot;: &quot;logo&quot;,
        &quot;status&quot;: 2
      }
    ],
    &quot;resultCount&quot;: 2
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b92">B9.2 商家验证卡券</h2>
<p>只有商家用户可调用。</p>
<p>商家通过手机扫描客户出示的二维码，识别出<code>code</code>值，然后调用该接口。</p>
<pre><code>GET /api/user/quest/coupon/check
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>code</td>
<td>Y</td>
<td>卡券编号</td>
</tr>
</tbody>
</table>
<h2 id="b93">B9.3 商家查询已经创建的卡券信息</h2>
<p>只有商家可以调用。</p>
<pre><code>GET /api/user/quest/coupon/emp/list
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>pn</td>
<td>N</td>
<td></td>
</tr>
<tr>
<td>ps</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>返回报文示例：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [ // list中的每一条记录表示一张卡券信息
      {
        // 卡券详细信息
        &quot;coupon&quot;: {
          &quot;id&quot;: 1,
          &quot;createdTime&quot;: &quot;2015-10-27 03:07:40&quot;,
          &quot;empId&quot;: 1, // 创建卡券的用户id
          &quot;memId&quot;: 2, // 忽略
          &quot;questTitle&quot;: &quot;title&quot;, // 卡券对应的任务的标题
          &quot;questId&quot;: 27, // 卡券对应的任务id
          &quot;title&quot;: &quot;coupon&quot;, // 卡券标题
          &quot;description&quot;: &quot;desp&quot;, // 卡券描述
          &quot;expiredTime&quot;: &quot;2019-12-31 16:00:00&quot;,
          &quot;logoPath&quot;: &quot;logo&quot; // 卡券logo路径
        },
        &quot;total&quot;: 1, // 卡券总数量
        &quot;left&quot;: 1 // 目前剩余数量
      },
      {
        &quot;coupon&quot;: {
          &quot;id&quot;: 21,
          &quot;createdTime&quot;: &quot;2015-10-27 03:15:23&quot;,
          &quot;empId&quot;: 1,
          &quot;questTitle&quot;: &quot;title&quot;,
          &quot;questId&quot;: 28,
          &quot;title&quot;: &quot;coupon&quot;,
          &quot;description&quot;: &quot;desp&quot;,
          &quot;expiredTime&quot;: &quot;2019-12-31 16:00:00&quot;,
          &quot;logoPath&quot;: &quot;logo&quot;
        },
        &quot;total&quot;: 10,
        &quot;left&quot;: 10
      },
      {
        &quot;coupon&quot;: {
          &quot;id&quot;: 41,
          &quot;createdTime&quot;: &quot;2015-11-12 15:11:45&quot;,
          &quot;empId&quot;: 1,
          &quot;questTitle&quot;: &quot;SHIT2&quot;,
          &quot;questId&quot;: 45,
          &quot;title&quot;: &quot;couponTitle&quot;,
          &quot;description&quot;: &quot;desp&quot;,
          &quot;expiredTime&quot;: &quot;2020-10-09 16:00:00&quot;
        },
        &quot;total&quot;: 10,
        &quot;left&quot;: 10
      },
      {
        &quot;coupon&quot;: {
          &quot;id&quot;: 141,
          &quot;createdTime&quot;: &quot;2015-11-13 14:20:26&quot;,
          &quot;empId&quot;: 1,
          &quot;questTitle&quot;: &quot;SHIT2&quot;,
          &quot;questId&quot;: 46,
          &quot;title&quot;: &quot;couponTitle&quot;,
          &quot;description&quot;: &quot;desp&quot;,
          &quot;expiredTime&quot;: &quot;2020-10-09 16:00:00&quot;
        },
        &quot;total&quot;: 4,
        &quot;left&quot;: 4
      },
      {
        &quot;coupon&quot;: {
          &quot;id&quot;: 241,
          &quot;createdTime&quot;: &quot;2015-11-13 14:24:56&quot;,
          &quot;empId&quot;: 1,
          &quot;questTitle&quot;: &quot;SHIT2&quot;,
          &quot;questId&quot;: 47,
          &quot;title&quot;: &quot;couponTitle&quot;,
          &quot;description&quot;: &quot;desp&quot;,
          &quot;expiredTime&quot;: &quot;2020-10-09 16:00:00&quot;
        },
        &quot;total&quot;: 4,
        &quot;left&quot;: 3
      }
    ],
    &quot;resultCount&quot;: 5
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="94-id">9.4 根据id查询卡券</h2>
<p>需要登陆，只能查询自己领取的卡券。</p>
<pre><code>GET /api/user/quest/coupon/{id}
</code></pre>

<blockquote>
<p><code>id</code>: 卡券id号</p>
</blockquote>
<h2 id="b10">B10 查询指定任务的提交记录</h2>
<p>只有商家和ADMIN可以调用。</p>
<pre><code>GET /api/user/quest/submit/{questId}/list
</code></pre>

<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>questId</td>
<td>Y</td>
<td>任务id</td>
</tr>
<tr>
<td>status</td>
<td>N</td>
<td>根据任务状态筛选结果</td>
</tr>
<tr>
<td>pn</td>
<td>N</td>
<td></td>
</tr>
<tr>
<td>ps</td>
<td>N</td>
<td></td>
</tr>
</tbody>
</table>
<p><code>status</code>取值如下：</p>
<table>
<thead>
<tr>
<th>取值</th>
<th>含意</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>待审核</td>
</tr>
<tr>
<td>02</td>
<td>商家审核未通过</td>
</tr>
<tr>
<td>03</td>
<td>桃李街审核未通过</td>
</tr>
<tr>
<td>04</td>
<td>自动通过</td>
</tr>
<tr>
<td>05</td>
<td>商家审核通过</td>
</tr>
<tr>
<td>06</td>
<td>桃李街审核通过</td>
</tr>
</tbody>
</table>
<p>返回报文:</p>
<pre><code class="JSON">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;id&quot;: 7,
        &quot;questId&quot;: 1,
        &quot;memberId&quot;: 2, // 任务提交用户的id
        &quot;username&quot;: &quot;taolijie&quot;, // 任务提交用户的用户名
        &quot;createdTime&quot;: &quot;2015-10-01 07:21:50&quot;, // 提交时间
        &quot;auditTime&quot;: &quot;2015-10-01 07:22:00&quot;, // 审核时间
        &quot;description&quot;: &quot;I'm done&quot;,
        &quot;imageIds&quot;: &quot;1;2;3;4;5&quot;,
        &quot;status&quot;: &quot;03&quot;,
        &quot;memo&quot;: &quot;&quot;,
        &quot;name&quot;: null
      }
    ],
    &quot;resultCount&quot;: 1
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b11">B11 条件查询</h2>
<p>任何人都可以调用该接口.</p>
<p>非管理员调用该接口，只返回<code>empStatus == 3</code>(已审核通过)的任务，如果是管理员调用，则可以指定<code>empStatus</code>类型。</p>
<pre><code>GET /api/quest/list
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>cateId</td>
<td>N</td>
<td>填写表示根据分类过虑结果</td>
</tr>
<tr>
<td>min</td>
<td>N</td>
<td>任务的最低赏金(include)</td>
</tr>
<tr>
<td>max</td>
<td>N</td>
<td>任务的最高赏金(include)</td>
</tr>
<tr>
<td>pn</td>
<td>N</td>
<td></td>
</tr>
<tr>
<td>ps</td>
<td>N</td>
<td></td>
</tr>
<tr>
<td>regionId</td>
<td>N</td>
<td>区域id</td>
</tr>
<tr>
<td>schoolId</td>
<td>N</td>
<td>学校id</td>
</tr>
<tr>
<td>*empStatus</td>
<td>N</td>
<td><strong>只有管理员可以使用该参数</strong>。填写表示根据empStatus值筛选结果</td>
</tr>
</tbody>
</table>
<blockquote>
<p>只填写<code>min</code>不填<code>max</code>表示查询赏金<code>&gt;= min</code>的任务。</p>
<p>只填写<code>max</code>不填<code>min</code>表示查询赏金<code>&lt;= max</code>的任务。</p>
<p>同时填写表示查询赏金在<code>min</code>与<code>max</code>之间的任务。</p>
</blockquote>
<p><code>empStatus</code>取值 ：</p>
<table>
<thead>
<tr>
<th>取值</th>
<th>含意</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>未发布(草稿状态)</td>
</tr>
<tr>
<td>1</td>
<td>审核中</td>
</tr>
<tr>
<td>2</td>
<td>审核不通过</td>
</tr>
<tr>
<td>3</td>
<td>审核通过</td>
</tr>
</tbody>
</table>
<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;id&quot;: 5,
        &quot;title&quot;: &quot;newQuest&quot;, // 任务标题
        &quot;createdTime&quot;: &quot;2015-09-29 09:53:00&quot;, // 任务创建时间
        &quot;questCateId&quot;: 1, // 任务分类id
        &quot;startTime&quot;: &quot;2015-10-09 16:00:00&quot;, // 任务开始时间
        &quot;endTime&quot;: &quot;2015-10-15 16:00:00&quot;, // 任务结束时间
        &quot;limitTime&quot;: 2, // 任务完成限制时间
        &quot;totalAmt&quot;: 1, // 任务总数
        &quot;leftAmt&quot;: 1, // 任务剩余数量
        &quot;award&quot;: 0.1, // 单个任务赏金
        &quot;memberId&quot;: 1, // 发布者id
        &quot;finalAward&quot;: 0.1, // 计算费率后的单个任务赏金
        &quot;contactName&quot;: &quot;whf&quot;,
        &quot;contactPhone&quot;: &quot;1111111&quot;,
        &quot;description&quot;: &quot;des&quot;,
        &quot;questDetail&quot;: &quot;detail&quot;,
        &quot;url&quot;: null,
        &quot;memo&quot;: null,
        &quot;offline&quot;: false,
        &quot;provinceId&quot;: 1,
        &quot;cityId&quot;: 1,
        &quot;regionId&quot;: 1,
        &quot;collegeId&quot;: null,
        &quot;schoolId&quot;: null,
        &quot;status&quot;: null
      }

    ],
    &quot;resultCount&quot;: 1
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b12-id">B12 根据id查询任务</h2>
<p>不需要登陆。</p>
<pre><code>GET /api/quest/{questId}
</code></pre>

<blockquote>
<p>questId: 任务id</p>
</blockquote>
<p>返回报文的<code>data</code>字段中有一个<code>status</code>参数，该参数的取值和含意如下：</p>
<table>
<thead>
<tr>
<th>取值</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>未领取</td>
</tr>
<tr>
<td>1</td>
<td>已领取</td>
</tr>
<tr>
<td>2</td>
<td>已结束</td>
</tr>
<tr>
<td>3</td>
<td>已完成</td>
</tr>
</tbody>
</table>
<p>返回报文示例：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;id&quot;: 1,
    &quot;title&quot;: &quot;quest-1&quot;,
    &quot;createdTime&quot;: &quot;2015-10-15 02:09:43&quot;,
    &quot;flushTime&quot;: 1445829952000,
    &quot;questCateId&quot;: 1,
    &quot;startTime&quot;: &quot;2014-12-31 16:00:00&quot;,
    &quot;endTime&quot;: &quot;2019-12-31 16:00:00&quot;,
    &quot;limitTime&quot;: 2,
    &quot;totalAmt&quot;: 10,
    &quot;leftAmt&quot;: 9,
    &quot;award&quot;: 1,
    &quot;memberId&quot;: 1,
    &quot;finalAward&quot;: 1,
    &quot;contactName&quot;: &quot;whf&quot;,
    &quot;contactPhone&quot;: &quot;111111&quot;,
    &quot;description&quot;: &quot;description&quot;,
    &quot;questDetail&quot;: &quot;detail&quot;,
    &quot;offline&quot;: false,
    &quot;tagExpireTime&quot;: &quot;2015-10-21 18:04:35&quot;,
    &quot;questionAmt&quot;: 0,
    &quot;coupon&quot;: false,
    &quot;couponLeft&quot;: 0,
    &quot;empStatus&quot;: 3,
    &quot;provinceId&quot;: 1,
    &quot;cityId&quot;: 1,
    &quot;regionId&quot;: 1,
    &quot;schools&quot;: [ // 任务对象: 学院信息
      {
        &quot;id&quot;: 1,
        &quot;questId&quot;: 1,
        &quot;schoolId&quot;: 2,
        &quot;schoolName&quot;: &quot;计算机学院&quot;
      },
      {
        &quot;id&quot;: 2,
        &quot;questId&quot;: 1,
        &quot;schoolId&quot;: 3,
        &quot;schoolName&quot;: &quot;电气学院&quot;
      }
    ],
    &quot;colleges&quot;: [ // 任务对象：大学
      {
        &quot;id&quot;: 1,
        &quot;questId&quot;: 1,
        &quot;collegeId&quot;: 1,
        &quot;collegeName&quot;: &quot;山东理工大学&quot;
      }
    ],
    &quot;cities&quot;: [ // 任务对象：城市
     {
        &quot;id&quot;: 1,
        &quot;questId&quot;: 1,
        &quot;cityId&quot;: 1,
        &quot;cityName&quot;: &quot;淄博&quot;
      }
    ], 
    &quot;pros&quot;: [ // 任务对象：省
    {
        &quot;id&quot;: 1,
        &quot;questId&quot;: 1,
        &quot;provinceId&quot;: 1,
        &quot;provinceName&quot;: &quot;山东&quot;
      }
    ] 
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b121">B12.1 查询附近的线下任务</h2>
<p>不需要登陆。</p>
<pre><code>GET /api/offquest/near
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>lo</td>
<td>Y</td>
<td>当前经度, 如<code>120.234</code></td>
</tr>
<tr>
<td>la</td>
<td>Y</td>
<td>当前纬度, 如<code>25.12</code></td>
</tr>
<tr>
<td>ps</td>
<td>N</td>
<td>一页显示的记录数，默认为8条</td>
</tr>
</tbody>
</table>
<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;id&quot;: 6,
        &quot;memId&quot;: 2,
        &quot;username&quot;: &quot;wanghongfei&quot;, // 任务发布者用户名
        &quot;title&quot;: &quot;title&quot;,
        &quot;cateId&quot;: 1,
        &quot;cateName&quot;: &quot;off_cate&quot;, // 任务分类名
        &quot;award&quot;: 10.5,
        &quot;createdTime&quot;: &quot;2015-12-01 10:52:40&quot;, // 任务发布时间(不要显示)
        &quot;workTime&quot;: &quot;2020-02-02 02:10:20&quot;,
        &quot;workPlace&quot;: &quot;work place&quot;,
        &quot;description&quot;: &quot;description&quot;,
        &quot;contactPhone&quot;: &quot;18518369058&quot;,
        &quot;status&quot;: &quot;00&quot;,
        &quot;provinceId&quot;: 1,
        &quot;cityId&quot;: 1,
        &quot;regionId&quot;: 1,
        &quot;flushTime&quot;: null, // 任务最近一次刷新的时间(总是给客户显示这个时间)
        &quot;distance&quot;: 69 // 该任务距离当前位置的距离，单位: 米
      }
    ],
    &quot;resultCount&quot;: 1 // 忽略该值
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b122">B12.2 根据区域查询线下任务</h2>
<p>不需要登陆。</p>
<pre><code>GET /api/offquest/region
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>rid</td>
<td>Y</td>
<td>区域id</td>
</tr>
<tr>
<td>pn</td>
<td>N</td>
<td></td>
</tr>
<tr>
<td>ps</td>
<td>N</td>
<td></td>
</tr>
</tbody>
</table>
<p>返回结果同<code>B12.1</code></p>
<h2 id="b123-id">B12.3 根据id查询线下任务</h2>
<p>不需要登陆。</p>
<pre><code>GET /api/offquest/{id}
</code></pre>

<blockquote>
<p><code>id</code>: 线下任务id号</p>
</blockquote>
<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;id&quot;: 19,
    &quot;memId&quot;: 2,
    &quot;username&quot;: &quot;wanghongfei&quot;,
    &quot;title&quot;: &quot;title&quot;,
    &quot;cateId&quot;: 1,
    &quot;cateName&quot;: &quot;off_cate&quot;,
    &quot;award&quot;: 10.5,
    &quot;createdTime&quot;: &quot;2015-12-02 06:47:13&quot;,
    &quot;workTime&quot;: &quot;2020-02-02 02:10:20&quot;,
    &quot;workPlace&quot;: &quot;work place&quot;,
    &quot;description&quot;: &quot;description&quot;,
    &quot;contactPhone&quot;: &quot;185XXXX9058&quot;,
    &quot;status&quot;: &quot;00&quot;,
    &quot;provinceId&quot;: 1,
    &quot;cityId&quot;: 1,
    &quot;regionId&quot;: 1,
    &quot;flushTime&quot;: &quot;2015-12-02 06:47:13&quot;,
    &quot;distance&quot;: null
  },
  &quot;ok&quot;: true
}
</code></pre>

<h1 id="taolijie">Taolijie代审核</h1>
<h2 id="b13">B13 计算桃李街代审核费用</h2>
<p>商家可以申请桃李街代审核任务完成申请。</p>
<pre><code>GET /api/user/quest/audit/fee
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>amt</td>
<td>Y</td>
<td>代审核的任务数量</td>
</tr>
</tbody>
</table>
<p>如，对于请求</p>
<pre><code>GET /api/user/quest/audit/fee?amt=56&amp;appToken=XXXXX
</code></pre>

<p>返回结果为：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: 56, // 需要56元
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b14-taolijie">B14 申请Taolijie代审核任务</h2>
<p>商家可以申请桃李街代审核任务完成申请。</p>
<pre><code>POST /api/user/quest/audit
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>questId</td>
<td>Y</td>
<td>要申请的任务id</td>
</tr>
<tr>
<td>amt</td>
<td>Y</td>
<td>代审核的数量</td>
</tr>
</tbody>
</table>
<blockquote>
<p>注: 同一个任务只能申请一次，重复申请会失败。</p>
</blockquote>
<h2 id="b15">B15 查询代审核明细</h2>
<p>商家可以查询自己申请过的代审核状态。</p>
<p>只有商家才能调用该接口。</p>
<pre><code>GET /api/user/quest/audit/list
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>questId</td>
<td>N</td>
<td>代审核的任务的id</td>
</tr>
<tr>
<td>pn</td>
<td>N</td>
<td></td>
</tr>
<tr>
<td>ps</td>
<td>N</td>
<td></td>
</tr>
</tbody>
</table>
<p>返回报文：</p>
<pre><code class="JSON">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;id&quot;: 2,
        &quot;questId&quot;: 1, // 代审核的任务is
        &quot;questTitle&quot;: &quot;quest1&quot;, // 代审核的任务的标题
        &quot;totAmt&quot;: 5, // 代审核总数量
        &quot;leftAmt&quot;: 5, // 代审核剩余数量
        &quot;empId&quot;: 1, // 申请者用户id
        &quot;empUsername&quot;: &quot;hanxinxin&quot;, // 申请者用户名
        &quot;createdTime&quot;: &quot;2015-10-15 16:00:00&quot; // 申请时间
      }
    ],
    &quot;resultCount&quot;: 1
  },
  &quot;ok&quot;: true
}
</code></pre>

<h1 id="_4">收藏</h1>
<h2 id="b16">B16 收藏任务</h2>
<pre><code>POST /api/user/co
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>questId</td>
<td>Y</td>
<td>任务</td>
</tr>
</tbody>
</table>
<h2 id="b17">B17 取消收藏任务</h2>
<pre><code>DELETE /api/user/co/quest/{questId}
</code></pre>

<blockquote>
<p>questId: 任务id</p>
</blockquote>
<h2 id="b18">B18 查询收藏列表</h2>
<pre><code>GET /api/user/co/list
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>pn</td>
<td>N</td>
<td></td>
</tr>
<tr>
<td>ps</td>
<td>N</td>
<td></td>
</tr>
</tbody>
</table>
<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;id&quot;: 1,
        &quot;createdTime&quot;: &quot;2015-05-09 16:00:00&quot;, // 收藏时间
        &quot;memberId&quot;: 1, // 收藏者用户id
        &quot;questId&quot;: 1, // 收藏的任务id
        &quot;questTitle&quot;: &quot;quset1&quot; // 收藏的任务标题
      }
    ],
    &quot;resultCount&quot;: 1
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="b19">B19 查询任务是否已经收藏</h2>
<pre><code>GET /api/user/co/check
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>questId</td>
<td>Y</td>
<td>任务id</td>
</tr>
</tbody>
</table>
<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: true, // 表示已经收藏
  &quot;ok&quot;: true
}
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../acc/" class="btn btn-neutral float-right" title="账户系统"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../register/" class="btn btn-neutral" title="登陆注册"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../register/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../acc/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
