<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>账户系统 - Taolijie轻兼职接口文档</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "账户系统";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Taolijie轻兼职接口文档</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">概述</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../register/">登陆注册</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../quest/">任务系统</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">账户系统</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#_1">验证码</a></li>
                
                    <li><a class="toctree-l4" href="#c1">C1 发送验证码到指定手机</a></li>
                
                    <li><a class="toctree-l4" href="#c2">C2 发送验证码到当前登陆用户手机</a></li>
                
                    <li><a class="toctree-l4" href="#c3-6">C3 生成一个6位图片验证码</a></li>
                
            
                <li class="toctree-l3"><a href="#_2">更新操作</a></li>
                
                    <li><a class="toctree-l4" href="#c4">C4 开通现金账户(钱包)</a></li>
                
                    <li><a class="toctree-l4" href="#c41">C4.1 修改交易密码</a></li>
                
                    <li><a class="toctree-l4" href="#c5">C5 修改支付宝账号</a></li>
                
                    <li><a class="toctree-l4" href="#c6">C6 修改银行卡账号</a></li>
                
                    <li><a class="toctree-l4" href="#c7">C7 发起提现申请</a></li>
                
                    <li><a class="toctree-l4" href="#c8">C8 支付宝下单</a></li>
                
                    <li><a class="toctree-l4" href="#c81">C8.1 钱包充值</a></li>
                
                    <li><a class="toctree-l4" href="#c9">C9 (无效)解绑手机号</a></li>
                
                    <li><a class="toctree-l4" href="#c10">C10 更换手机号</a></li>
                
                    <li><a class="toctree-l4" href="#c11">C11 商家身份认证申请</a></li>
                
                    <li><a class="toctree-l4" href="#c111">C11.1 个人身份认证申请</a></li>
                
                    <li><a class="toctree-l4" href="#c12">C12 学生身份认证申请</a></li>
                
            
                <li class="toctree-l3"><a href="#_3">查询操作</a></li>
                
                    <li><a class="toctree-l4" href="#c13">C13 查询当前用户的现金账户</a></li>
                
                    <li><a class="toctree-l4" href="#c131">C13.1 查询当前账户余额</a></li>
                
                    <li><a class="toctree-l4" href="#c14">C14 查询账户资金变化记录</a></li>
                
                    <li><a class="toctree-l4" href="#c15">C15 查询密保问题</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../admin/">后台接口</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../sign/">签名生成</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../job/">兼职</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../sh/">二手</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../reco/">推荐</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../dict/">字典</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Taolijie轻兼职接口文档</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>账户系统</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="_1">验证码</h1>
<h2 id="c1">C1 发送验证码到指定手机</h2>
<p>需要登陆。</p>
<pre><code>GET /api/user/code/sms
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>mobile</td>
<td>Y</td>
<td>手机号</td>
</tr>
<tr>
<td>code</td>
<td>Y</td>
<td>用户在页面上填写的验证码, 只有该验证码正确时才会真正发送短信</td>
</tr>
</tbody>
</table>
<blockquote>
<p>手机短信中的验证码有效时间为5分钟。</p>
</blockquote>
<h2 id="c2">C2 发送验证码到当前登陆用户手机</h2>
<p>需要登陆。</p>
<pre><code>POST /api/user/code/sms
</code></pre>

<h2 id="c3-6">C3 生成一个6位图片验证码</h2>
<p>该接口用于生成一个随机验图片证码，防机器人</p>
<p>需要登陆。</p>
<pre><code>GET /gen.do
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>mId</td>
<td>Y</td>
<td>当前登陆用户的id</td>
</tr>
</tbody>
</table>
<h1 id="_2">更新操作</h1>
<h2 id="c4">C4 开通现金账户(钱包)</h2>
<p>该接口需要登陆，且只允许APP调用。</p>
<p>用户在第一次进入钱包时调用该接口。</p>
<pre><code>POST /api/user/acc
</code></pre>

<p>参数:</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>dealPwd</td>
<td>Y</td>
<td>交易密码</td>
</tr>
<tr>
<td>seContent</td>
<td>Y</td>
<td>密保问题(45字以内)</td>
</tr>
<tr>
<td>seAnswer</td>
<td>Y</td>
<td>密保答案(45字以内)</td>
</tr>
<tr>
<td>email</td>
<td>N</td>
<td>用户邮箱</td>
</tr>
<tr>
<td>name</td>
<td>N</td>
<td>用户姓名</td>
</tr>
</tbody>
</table>
<h2 id="c41">C4.1 修改交易密码</h2>
<p>需要登陆，且已经开通了钱包、设置过密保。</p>
<pre><code>PUT /api/user/acc/dealPwd
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>answer</td>
<td>Y</td>
<td>密保答案</td>
</tr>
<tr>
<td>dealPwd</td>
<td>Y</td>
<td>新交易密码</td>
</tr>
</tbody>
</table>
<h2 id="c5">C5 修改支付宝账号</h2>
<pre><code>PUT /api/user/acc/alipay
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>alipay</td>
<td>Y</td>
<td>新支付宝账户</td>
</tr>
<tr>
<td>code</td>
<td>Y</td>
<td>手机验证码</td>
</tr>
</tbody>
</table>
<h2 id="c6">C6 修改银行卡账号</h2>
<pre><code>PUT/ api/user/acc/bank
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>bankAcc</td>
<td>Y</td>
<td>新银行卡号</td>
</tr>
<tr>
<td>code</td>
<td>Y</td>
<td>手机验证码</td>
</tr>
</tbody>
</table>
<h2 id="c7">C7 发起提现申请</h2>
<p>商家、学生都可以申请提现。</p>
<pre><code>POST /api/user/acc/withdraw
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>amt</td>
<td>Y</td>
<td>提现金额</td>
</tr>
<tr>
<td>dealPwd</td>
<td>N</td>
<td>交易密码</td>
</tr>
<tr>
<td>payType</td>
<td>Y</td>
<td><code>0</code> 支付到支付宝, <code>1</code>支付到微信钱包, <code>2</code>支付到银行卡号</td>
</tr>
</tbody>
</table>
<p>当提现到支付宝或银行卡号时，用户必须先绑定支付宝或银行卡，否则接口会返回错误信息。</p>
<p>当提现到微信钱包时，用户必须先绑定微信账户，否则接口会返回错误信息。</p>
<h2 id="c8">C8 支付宝下单</h2>
<p>需要登陆状态。</p>
<pre><code>POST /api/pay/order
</code></pre>

<p>参数:</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>subject</td>
<td>Y</td>
<td>同alipay的<code>subject</code></td>
</tr>
<tr>
<td>totalFee</td>
<td>Y</td>
<td>订单总金额，同alipay的<code>total_fee</code></td>
</tr>
<tr>
<td>body</td>
<td>Y</td>
<td>同alipay的<code>body</code></td>
</tr>
<tr>
<td>orderType</td>
<td>Y</td>
<td>订单类型</td>
</tr>
<tr>
<td>payChan</td>
<td>Y</td>
<td>支付渠道; <code>0</code>支付宝 <code>1</code> 微信</td>
</tr>
</tbody>
</table>
<p><code>orderType</code>取值：</p>
<table>
<thead>
<tr>
<th>取值</th>
<th>含意</th>
</tr>
</thead>
<tbody>
<tr>
<td>00</td>
<td>钱包充值订单</td>
</tr>
<tr>
<td>01</td>
<td>任务置顶推荐订单</td>
</tr>
<tr>
<td>02</td>
<td>任务加标签订单</td>
</tr>
<tr>
<td>03</td>
<td>任务发布订单</td>
</tr>
</tbody>
</table>
<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;orderId&quot;: 57, // 订单号
    &quot;sign&quot;: // 签名 &quot;uy9MEVOu3EUrsElX4DXtEgh8qg6CUTbDowcnFX1Ys/N2SxALw018hRyC7iAg10+kdpIR2IRJVeoaXg4Y/l7/2ARsEx3XwrgQ2b6PeDuh91zJLTzyBtuQF8LBtP1GWypHXeve9RtqA8Q4KE9Tyydxw9QnkALKZKF+DekmhJh9Ou4=&quot;,
    &quot;servName&quot;: &quot;mobile.securitypay.pay&quot;, // 对应alipay的service参数
    &quot;partner&quot;: &quot;2088021861615600&quot;, // 对应alipay的partner参数
    &quot;charset&quot;: &quot;utf-8&quot;, // 对应alipay的_input_charset参数
    &quot;signType&quot;: &quot;RSA&quot; // 对应alipay的sign_type参数
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="c81">C8.1 钱包充值</h2>
<p>需要登陆。</p>
<p>调用该接口必须先调用<code>C8下单</code>。</p>
<pre><code>POST /api/user/acc/charge
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>orderId</td>
<td>Y</td>
<td>充值订单号</td>
</tr>
</tbody>
</table>
<h2 id="c9">C9 (无效)解绑手机号</h2>
<pre><code>DELETE /api/user/acc/phone
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>code</td>
<td>Y</td>
<td>发送到用户老手机上的验证码</td>
</tr>
</tbody>
</table>
<h2 id="c10">C10 更换手机号</h2>
<pre><code>PUT /api/user/acc/phone
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>code</td>
<td>Y</td>
<td>发送到用户新手机上的验证码</td>
</tr>
<tr>
<td>phone</td>
<td>Y</td>
<td>新手机号</td>
</tr>
<tr>
<td>answer</td>
<td>N</td>
<td>密保答案. 不填写表示不用密保验证</td>
</tr>
</tbody>
</table>
<blockquote>
<p>注意：只有当用户先解绑手机后才能成功调用该接口。</p>
</blockquote>
<h2 id="c11">C11 商家身份认证申请</h2>
<p>只有商家用户在登陆状态时才可以调用该接口。</p>
<pre><code>POST /api/user/certi/emp
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>compName</td>
<td>Y</td>
<td>公司全名(45字以内)</td>
</tr>
<tr>
<td>addr</td>
<td>Y</td>
<td>公司地址(45字以内)</td>
</tr>
<tr>
<td>picIds</td>
<td>Y</td>
<td>照片上传</td>
</tr>
<tr>
<td>cateId</td>
<td>Y</td>
<td>行业分类的id号</td>
</tr>
<tr>
<td>compPhone</td>
<td>N</td>
<td>联系电话</td>
</tr>
<tr>
<td>contName</td>
<td>Y</td>
<td>企业联系人姓名</td>
</tr>
</tbody>
</table>
<p><code>picIds</code>参数为以<code>;</code>分隔的图片在又拍云的路径, 如:</p>
<pre><code>/a.jpg;/b.jpg
</code></pre>

<h2 id="c111">C11.1 个人身份认证申请</h2>
<p>需要登陆。</p>
<pre><code>POST /api/user/certi/id
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>Y</td>
<td>真实姓名</td>
</tr>
<tr>
<td>id</td>
<td>Y</td>
<td>身份证号</td>
</tr>
<tr>
<td>picIds</td>
<td>Y</td>
<td>上传的证件图片, 以<code>;</code>隔</td>
</tr>
</tbody>
</table>
<h2 id="c12">C12 学生身份认证申请</h2>
<p>只有学生用户在登陆状态时才可以调用该接口。</p>
<pre><code>POST /api/user/certi/stu
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>Y</td>
<td>真实姓名(不超过10字符)</td>
</tr>
<tr>
<td>cityId</td>
<td>Y</td>
<td>所在城市的id</td>
</tr>
<tr>
<td>collegeId</td>
<td>Y</td>
<td>所在大学的id</td>
</tr>
<tr>
<td>picIds</td>
<td>Y</td>
<td>上传的认证图片</td>
</tr>
<tr>
<td>cname</td>
<td>N</td>
<td>班级</td>
</tr>
</tbody>
</table>
<p><code>picIds</code>参数为以<code>;</code>分隔的图片在又拍云的路径, 如:</p>
<pre><code>/2015/10.12/sef72390sfxcvbx89asdfzb89;/2015/10.12/sef72sadsfxcvbx89asdfzb89
</code></pre>

<h1 id="_3">查询操作</h1>
<h2 id="c13">C13 查询当前用户的现金账户</h2>
<p>需要登陆。</p>
<pre><code>GET /api/user/acc
</code></pre>

<p>该接口不需要参数。</p>
<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;id&quot;: 2,
    &quot;availableBalance&quot;: 1, // 可用余额
    &quot;frozenBalance&quot;: 0, // 无用字段
    &quot;totalBalance&quot;: 1, // 无用字段
    &quot;status&quot;: &quot;00&quot;, // 账户状态
    &quot;updateTime&quot;: &quot;2015-09-24 12:50:54&quot;, // 最后更新时间
    &quot;createdTime&quot;: &quot;2015-09-24 12:50:54&quot;, // 开户时间
    &quot;memberId&quot;: 2, // 账户所有者id
    &quot;username&quot;: &quot;taolijie&quot;, // 所有者用户名
    &quot;memberRole&quot;: &quot;STUDENT&quot;, // 所有者用户类型
    &quot;phoneNumber&quot;: &quot;1828312368&quot; // 所有者手机号
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="c131">C13.1 查询当前账户余额</h2>
<p>调用该接口查询余额以节省流量。</p>
<pre><code>GET /api/user/acc/balance
</code></pre>

<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: 7.4, // 可用余额
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="c14">C14 查询账户资金变化记录</h2>
<p>需要登陆。</p>
<pre><code>GET /api/user/acc/flow
</code></pre>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>N</td>
<td>开始日期。 如，2015-9-14</td>
</tr>
<tr>
<td>end</td>
<td>N</td>
<td>结束日期。如，2015-9-20</td>
</tr>
<tr>
<td>pn</td>
<td>N</td>
<td></td>
</tr>
<tr>
<td>ps</td>
<td>N</td>
<td></td>
</tr>
</tbody>
</table>
<p>对于请求</p>
<pre><code>/api/user/acc/flow?appToken=token&amp;ps=2
</code></pre>

<p>返回报文为：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;list&quot;: [
      {
        &quot;id&quot;: 14,
        &quot;createdTime&quot;: &quot;2015-10-01 14:07:06&quot;,
        &quot;accId&quot;: 1, // 现金账户id
        &quot;actionType&quot;: &quot;00&quot;, // 资金变动的原因
        &quot;avaBalanceCh&quot;: -5, // 可用余额变化值
        &quot;froBalanceCh&quot;: 0, // 无用字段
        &quot;totBalanceCh&quot;: 0, // 无用字段
        &quot;avaBalanceNew&quot;: 186.9, // 可用余额变化后的新值 
        &quot;froBalanceNew&quot;: 0, // 无用
        &quot;totBalanceNew&quot;: 0, // 无用
        &quot;memo&quot;: null
      },
      {
        &quot;id&quot;: 12,
        &quot;createdTime&quot;: &quot;2015-09-29 09:53:00&quot;,
        &quot;accId&quot;: 1,
        &quot;actionType&quot;: &quot;00&quot;,
        &quot;avaBalanceCh&quot;: -0.1,
        &quot;froBalanceCh&quot;: 0,
        &quot;totBalanceCh&quot;: 0,
        &quot;avaBalanceNew&quot;: 191.9,
        &quot;froBalanceNew&quot;: 0,
        &quot;totBalanceNew&quot;: 0,
        &quot;memo&quot;: null
      }
    ],
    &quot;resultCount&quot;: 8
  },
  &quot;ok&quot;: true
}
</code></pre>

<h2 id="c15">C15 查询密保问题</h2>
<p>需要登陆，且已经设置过密保。</p>
<pre><code>GET /api/user/acc/question
</code></pre>

<p>不需要参数。</p>
<p>返回报文：</p>
<pre><code class="json">{
  &quot;message&quot;: &quot;success&quot;,
  &quot;code&quot;: 0,
  &quot;data&quot;: {
    &quot;id&quot;: 1,
    &quot;createdTime&quot;: &quot;2015-10-25 03:25:24&quot;,
    &quot;memberId&quot;: 3,
    &quot;accId&quot;: 3,
    &quot;content&quot;: &quot;content&quot; // 密保问题
  },
  &quot;ok&quot;: true
}
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../admin/" class="btn btn-neutral float-right" title="后台接口"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../quest/" class="btn btn-neutral" title="任务系统"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../quest/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../admin/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
